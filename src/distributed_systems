
##Outage / Activity Details
Detailed activity procedures can be added at the step level - just provide a general overview here. 
This activity is to dial up the following weblab:
https://weblab.amazon.com/#{{WEBLAB_NAME}}
in {{DIALUP_REALMS}}

####What is the purpose of this activity or change?
The MCM is written in preparation for an emergency dialing down for Order Status Home Cards to only beta customers during Christmas peak.

####What will be required to execute this change?
Dialing down this weblab so that the Production domain has {{TARGET_TREATMENT_CODE}} set to 100%.

####What is the expected end state of the system after this change?
AlexaShoppingOrderStatusHomeScreenService should only consume order, shipments and display settings related events for beta customers, and only publish home cards to AlexaMMHomePublishingService for beta customers subsequently.

####What assumptions, if any, are being made about the state of the system at the time of this change?
The code for the new experiences is deployed to prod, and the weblab is dialed up in prod. 

See Slapshot events contracts which are gated by weblab: 
https://slapshot.integ.amazon.com/slapshot-dashboard.html#/slap/ASMM/AlexaShoppingOrderStatusHomeScreen/ASNSSettingsUpdate
https://slapshot.integ.amazon.com/slapshot-dashboard.html#/slap/ASMM/AlexaShoppingOrderStatusHomeScreen/ShipTrackEventProcessor
https://slapshot.integ.amazon.com/slapshot-dashboard.html#/slap/ASMM/AlexaShoppingOrderStatusHomeScreen/OrderStatusOwenFilter

##Impact / Risk Assessment
####Why is it necessary? What is the impact of not making this change?
Anchor team is concerned with a large amount of new devices coming online during Christmas period, they may get a burst of traffic that would exceed their estimated TPS. They have requests that in the event they start to see some customer impact, Alexa Shopping Multimodal Experiences team reduces AlexaOrderStatusHomeScreenService's traffic sent to them as we are not yet publishing the card to customers. Dialing down our Production weblab would reduce their load without affecting our Beta customers.

####Why is this the correct time/day to complete the CM?
There is minimal impact, as the feature behind this weblab has been tested in prod via overrides.
Time period has been chosen to cover the entire christmas period.

####Are there any related, prerequisite changes upon which this CM hinges?
No

####Will this CM be in any way intrusive, and if so, how will you know? What teams, services or functionality will be impacted?
Intrusive only to Anchor's AlexaMMHomePublishingService

####Have you confirmed that this will not impact "Where's My Stuff" or other features that share dependencies?
They are on the approvers list.

####Is this change modifying a tier-1 service or website? Which one?
No services being modified are tier-1.

####How has this change been tested to verify itâ€™s safe for production?
Manually tested in beta, gamma and in prod using weblab overrides.
Manually tested in beta, gamma and in prod using weblab overrides. Our Beta customers have their Order Status events already being sent to the system.

##Affected Services
AlexaMMHomePublishingService

####Does this change involve other dependencies? Are they aware of this CM and on the cc-list or approvals for it?
Yes. An email will be sent out to all depenedency owners to notify them of the possibility of our 
AlexaMMHomePublishingService

####Provide links to your dependencies dashboard(s)
* Home Screen Order Status feature dashboard including AWS stack: https://w.amazon.com/bin/view/Alexa_Shopping/MultiModalExperiences/Order_Status_Home_Screen/Dashboard
* AlexaMMHomePublishingService: https://w.amazon.com/index.php/Digital/Alexa/Anchor/AlexaMMHomePublishingService/Dashboard/NA/Prod
* Alexa Shopping MultiModal Experiences: https://w.amazon.com/bin/view/Alexa_Shopping/MultiModalExperiences/Order_Status_Home_Screen/Dashboard/


##Worst Case Scenario
####What could happen if everything goes wrong with this change?
<WHAT OTHER SIDE EFFECTS ARE THERE?>
If we discover an unintended side effect of dialling up the changes, we can potentially impact Anchor's service's ability to provide home cards for Alexa customers.


####How does this CM attempt to mitigate this risk?
The CM only includes a minimal set of changes, and it only involves weblab dialup.
<Any other risks that can be mitigated?>

##Rollback Procedure
####Detailed rollback procedures can be added at the step level - just provide a general overview here. 
Dial back down the weblabs so that #{{ORIGINAL_TREATMENT_CODE}} is in 100% for prod.

####Are there any cases that weblab dial down will cause system to fail?
<Is your code already dealing with weblab switches, if dial up then dial down can possibly case system to fail, rethink your code before actually proceeding with this CM>

###What conditions would indicate a need to rollback? Provide graphs with rollback thresholds marked, or other clear indicators to the technicians when a rollback is required

Monitoring below metrics and alarms:
* Home Screen Order Status feature dashboard including AWS stack: https://w.amazon.com/bin/view/Alexa_Shopping/MultiModalExperiences/Order_Status_Home_Screen/Dashboard
* Alexa Shopping Multi Model Experiences TT queue: https://tiny.amazon.com/1e634h9ha/tcorpamazissu

If any alarms are triggered at Sev 2, 2.5 we will roll back. <CONSIDER IF THERE ARE ANY SEV 3s THAT SHOULD BE ATTACHED TO THE MCM AND ALSO TRIGGER A ROLLBACK>
<ENSURE ALL ALARMS FOR DEPENDENCIES THAT ARE IMPORTANT ARE EITHER ATTACHED TO THE MCM OR CLONED TO OUR CTI, List specific monitors for this weblab dial up and add them below>


####In the event of problems, what will you do to return your system to a known good state?
Dial back down the weblab.
<ARE THERE ANY OTHER STEPS REQUIRED?>
> Written with [StackEdit](https://stackedit.io/).
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTE1MzkwMTkxNDZdfQ==
-->